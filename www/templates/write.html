<ion-view view-title="{{uploadTitle}}">
  <ion-nav-buttons side="left">
    <button type="submit" class="button button-icon" ng-if="addView"  ng-click="cancelCard()">
        취소
    </button>
  </ion-nav-buttons>
  <ion-nav-buttons side="right">
    <button type="submit" class="button button-icon" ng-click="uploadCard(cardForm)">
        <!-- <i class="icon ion-checkmark"></i> -->
        완료
    </button>
  </ion-nav-buttons>
  <form name="cardForm" novalidate="" class="css-form" >
  <ion-content>
    
    <!-- Title -->
    <div class="form-group" id="wrtie_page">
      <label class="item item-input"  
         ng-class="{ 'has-errors' : cardForm.title.$invalid , 'no-errors' : cardForm.title.$valid }">

      <input id="card_title" type="text" name="title" placeholder="제목" ng-model="cardData.title" required="required"/>

      </label>

      <div class="error-container"  
         ng-show="cardForm.title.$error"
         ng-messages="cardForm.title.$error">
         <div ng-messages-include="error-list.html"></div>
      </div>
      
      <!-- Location -->
      <label class="item item-input"  
         ng-class="{ 'has-errors' : cardForm.location.$invalid && cardForm.$submitted, 'no-errors' : cardForm.location.$valid  && cardForm.$submitted}">
      <!-- <span class="input-label">Location</span>   -->
      <i class="fa fa-map-marker" style="margin-right:10px"></i>
      <input id="card_location"
         type="text"  
         name="location"
         placeholder="위치 추가"
         ng-model="cardData.location"
         lat="" 
         long=""
         style="cursor:pointer" 
         ng-click="showMap()"
         required>
      </label>
      <div class="error-container"  
         ng-show="cardForm.location.$error && cardForm.$submitted"
         ng-messages="cardForm.location.$error">
         <div ng-messages-include="error-list.html"></div>
      </div> 


      <!-- Description -->
      <label class="item item-input"  
         ng-class="{ 'has-errors' : cardForm.description.$invalid  && cardForm.$submitted, 'no-errors' : cardForm.description.$valid  && cardForm.$submitted}">
        <textarea id="card_des"
         rows="9" 
         name="description"
         placeholder="발견된 위험의 종류, 주변상황, 구체적인 장소정보 등을 자유롭게 적어주세요"
         ng-model="cardData.description"
         ng-value="inputData.description"
         required></textarea>
      </label>  
      <div class="error-container"  
         ng-show="cardForm.description.$error && cardForm.$submitted"
         ng-messages="cardForm.description.$error">
         <div ng-messages-include="error-list.html"></div>
      </div>

      
      <!-- File -->
      <label class="item item-input"  
         ng-class="{ 'has-errors-img' : cardForm.file.$invalid && cardForm.$submitted, 'no-errors-img' : cardForm.file.$valid  && cardForm.$submitted}">
      <div id="picture_list">
        <img id="card_img" ng-show="imgURI !== undefined" ng-src="{{imgURI}}" onError="this.src='img/default.png'">
        <a class="change-link"><i class="ion-ios-reverse-camera img-change" ng-show="imgURI !== undefined"></i></a>
        <!-- <img ng-show="imgURI === undefined" ng-src="http://placehold.it/100x100"> -->
        <button id="change_pic" class="button button-icon" ng-click="showPictureSheet($event)">
          <i class="icon ion-ios-reverse-camera"></i>
        </button>
      </div>
      <input id="card_file"
        type = "hidden"
        name="file"
        ng-model="cardData.file"
        style ="display: block"
        required>
      </label>
      <div class="error-container last-error-container"  
          ng-show="cardForm.file.$error && cardForm.$submitted"
          ng-messages="cardForm.file.$error">
         <div ng-messages-include="error-list.html"></div>
      </div> 
      

      <!-- <input id="card_file_hidden"
        type="file"
        name="file"
        style ="display: block"
        onchange="this.select(); setFilePath(this)"> -->

      <!-- Error Messages (angular-messages 1.4.3부터 적용되는데 웹에서는 되는데 앱에서는 에러발생) -->
      <script id="error-list.html" type="text/ng-template">  
        <div class="error" ng-message="required">
          <i class="ion-information-circled"></i> 
          이 부분을 작성하세요
        </div>
      </script>

    </div>
  </ion-content>
  </form>
</ion-view>